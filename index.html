<!DOCTYPE html>
<html lang="en">
    <head>

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-S2JZB0X9MQ"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-S2JZB0X9MQ');
        </script>
        
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <link href="https://fonts.googleapis.com/css2?family=Italiana&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <script src="calculateResources.js"></script>
        
        <title>Planet Bouncer - Questionnaire with GPT</title>
        
        <style>
            /* General styles */
            body {
                font-family: Arial, sans-serif;
                background-color: #232D3F;
                margin: 0;
                display: flex;
                flex-direction: column;
                min-height: 100vh; /* Full height */
            }

            /* Top bar styles */
            .top-bar {
                width: 100%;
                background-color: #232D3F; /* Your desired background color */
                color: #fff; /* Text color */
                padding: 15px 0; /* Top and bottom padding */
                padding-left: 20px; /* Left padding for spacing */
                position: fixed; /* Keeps it at the top while scrolling */
                top: 0;
                left: 0;
                text-align: left; /* Left-align the text */
                font-family: 'Italiana', sans-serif; /* Matches the header font */
                z-index: 1000; /* Keeps it above other content */
             /*   box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  Optional shadow for depth */
            }
            
            /* Main container */
            .main-container {
                width: 100%; /* Use full width */
                max-width: 1200px; /* Cap at 1200px */
                margin: 20px auto;
                padding-top: 60px; /* Add space equal to the top bar's height */
                display: flex;
                flex-direction: column;
                flex-grow: 1; /* Allow growth */
            }
            
            /* Content wrapper for horizontal layout */
            .content-wrapper {
                display: flex;
                justify-content: space-between; /* Space between sections */
                width: 100%; /* Full width */
                flex-grow: 1;
                gap: 0px; /* Space between sections */
                min-height: 85vh; /* Full content height */
            }
            
            /* Question Section */
            .question-section {
                background-color: #fff;
                border-radius: 0px;
                padding: 20px;
                margin-right: 20px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                flex: 1;
                max-height: 75vh;  /* Ensure it doesn't take too much space */
                overflow-y: auto;  /* Allows scrolling */
                position: relative;  /* Allows sticky element to stick inside this container */
            }
            
            /* Chatbot Section */
            .chatbot-section {
                background-color: #fff;
                border-radius: 0px;
                padding: 20px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                flex: 1; /* Equal growth with the question section */
                display: flex;
                flex-direction: column;
                max-height: 75vh; /* Limit the section height */
                max-width: 35%;  /* Adjusted width */
            }
            
            /* Chatbox inside chatbot section */
            .chatbox {
                flex: 1; /* Take available height in .chatbot-section */
                overflow-y: auto; /* Enable scrolling */
                padding: 10px;
                border: 1px solid #e8e8e8;
                border-radius: 4px;
                background-color: #fff;
                margin-bottom: 20px;
            }
            
            /* General styles for mobile screens */
            @media (max-width: 768px) {
                /* Stack the content vertically */
                .content-wrapper {
                    flex-direction: column; /* Stack sections vertically */
                    gap: 20px; /* Add some space between the sections */
                }
                
                /* Adjust the question and chatbot sections */
                .question-section,
                .chatbot-section {
                    width: 100%; /* Full width for each section */
                    max-width: none; /* Remove max-width constraint */
                    margin-right: 20px; /* Remove right margin */
                    max-height: 60vh; /* Reduce the height on smaller screens */
                }
            
                /* Chatbox adjustments */
                .chatbox {
                    max-height: 50vh; /* Allow more room for chat messages */
                }
            
                /* Footer adjustments */
                .footer-container {
                    width: 90%; /* Make footer slightly narrower */
                    font-size: 8px; /* Reduce footer font size on small screens */
                }
            
                /* Adjust font size for headers */
                h2 {
                    font-size: 20px; /* Smaller font size for mobile */
                    text-align: center;
                }
            
                /* Adjust label and radio button font sizes */
                .question label.question-text {
                    font-size: 12px; /* Smaller question text font */
                }
            
                .question label.option-label {
                    font-size: 11px; /* Smaller option label font */
                }
            
                /* Input area adjustments for chatbot */
                .input-area {
                    flex-direction: row;
                    align-items: center;
                }
            
                .input-area input {
                    padding: 8px;
                    font-size: 12px;
                }
            
                .input-area button {
                    padding: 8px 16px;
                    font-size: 14px;
                }
            
                /* Submit button adjustments */
                .submit-section-sticky {
                    padding: 10px;
                    width: 100%;
                    bottom: 0;
                }
            
                .submit-section-sticky button {
                    width: 100%; /* Full width button on mobile */
                    font-size: 16px; /* Larger font for better readability */
                }
            }

            /* Adjustments for smaller mobile screens */
            @media (max-width: 390px) {
                .top-bar {
                    padding-left: 10px; /* Less padding for smaller screens */
                    padding-top: 10px; /* Adjust padding as needed */
                    padding-bottom: 10px;
                }
                .top-bar h1 {
                    font-size: 18px; /* Smaller font for mobile */
                }
            
                .content-wrapper {
                    flex-direction: column; /* Stack sections vertically */
                    align-items: center; /* Center align for better view */
                    gap: 10px; /* Add a bit of gap between stacked sections */
                }
            
                .question-section,
                .chatbot-section {
                    width: 90%; /* Full width for both sections */
                    max-width: none; /* Remove max-width to prevent shrinking */
                    padding: 15px; /* Add padding for readability */
                    margin: 0 auto; /* Center the sections */
                }
            
                .chatbox {
                    height: 300px; /* Reduce chatbox height for smaller screens */
                }

                .submit-section-sticky {
                    padding: 0px;
                }
            }
            
            /* Footer */
            .footer-container {
                width:60%;
                margin: 0 auto;
                text-align: center;
                padding: 10px 0;
                margin-top: auto;
            }

            .footer-text {
                font-size: 10px;
                color: #808080;
            }

            h2 {
                font-family: 'Italiana', sans-serif; /* Google Font */
                font-size: 40px; /* Adjust the size */
                color: #0F0F0F; 
                text-align: center;
                letter-spacing: 2px;
                margin-bottom: 40px;
            }

            h3 {
                font-family: 'Italiana', sans-serif; /* Google Font */
                font-size: 25px; /* Adjust the size */
                color: #0F0F0F; 
                text-align: center;
                letter-spacing: 1px;
                margin-top: 40px;
                margin-bottom: 10px;
            }

            .question div {
                display: flex;
                align-items: center;
                margin-bottom: 5px;  /* Space between options */
            }

            /* Style for the question text only */
            .question label.question-text {
                font-weight: bold;  /* Makes the question text bold */
                font-size: 14px;
                display: block;  /* Ensure the label behaves like a block element */
                margin-top: 30px;
                margin-bottom: 14px;  /* Adds space between the question and the options */
            }
            
            /* Style for the radio button options */
            .question label.option-label {
                font-weight: normal;  /* Ensures the radio button labels are not bold */
                font-size: 12px;
                margin-left: 8px;  /* Adds some space between the radio button and the label */
            }

            .dropdown {
                width: 100%;
                padding: 10px;
                font-size: 12px;
                border-radius: 4px;
                border: 1px solid #ddd;
            }

            .toggle {
                display: flex;
                justify-content: space-between;
                max-width: 250px;
                margin: 10px 0;
            }

            input[type="radio"] {
                margin-right: 10px;
                margin-bottom: 5px;
                accent-color: #008170; /* Replace with your desired color */
            }

            input[type="range"] {
                width: 100%;  /* Make the slider take the full width of the container */
                margin: 10px 0;
                accent-color: #008170; /* Replace with your desired color */
            }

            .chatbox {
                height: 400px;
                overflow-y: auto;
                padding: 10px;
                border: 1px solid #e8e8e8;
                border-radius: 4px;
                background-color: #fff;
                margin-bottom: 20px;
            }

            .message {
                margin: 10px 0;
                padding: 10px;
                border-radius: 4px;
            }

            .message.user {
                background-color: #e8e8e8;
                text-align: right;
            }

            .message.bot {
                background-color: #fff;  /* Background color for the bot messages */
                color: #005B41;  /* Define the font color for the bot's text */
                border-radius: 4px;
                padding: 10px;
                margin: 10px 0;
            }

            .input-area {
                display: flex;
            }

            .input-area input {
                flex: 1;
                padding: 10px;
                border: 1px solid #e8e8e8;
                background-color: #fff;
                border-radius: 4px;
                margin-right: 10px;
            }

            .input-area button {
                padding: 10px 20px;
                border: none;
                background-color: #008170;
                color: #fff;
                border-radius: 4px;
                cursor: pointer;
            }

            .input-area button:hover {
                background-color: #005B41;
            }

            .submit-section-sticky {
                position: sticky;
                bottom: 0;  /* Makes it stick at the bottom of the container */
                background-color: #fff;
                padding: 10px;
                text-align: center;
                box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);  /* Optional shadow */
            }

            .submit-section-sticky button {
                padding: 10px 20px;
                border: none;
                background-color: #008170;
                color: #fff;
                border-radius: 4px;
                cursor: pointer;
            }

            .submit-section-sticky button:hover {
                background-color: #005B41;
            }

            #sendBtn {
                background-color: transparent;  /* No background */
                border: none;  /* Remove the border */
                cursor: pointer;  /* Pointer cursor on hover */
            }

            #sendBtn i {
                font-size: 20px;  /* Adjust the size of the icon */
                color: #008170;  /* Set the icon color */
            }

            #sendBtn:hover i {
                color: #005B41;  /* Change color on hover */
            }
        </style>
    </head>

    
    <body>
    <!-- Top Bar with App Name -->
    <div class="top-bar">
        <h1>Planet Bouncer</h1>
    </div>
        <!-- Main Container -->
        <div class="main-container">
            <!-- Wrapper to hold question and chatbot sections side by side -->
            <div class="content-wrapper">
                <!-- Question Section -->
                <div class="question-section">
                    <!-- Housing Section -->
                    <div class="housing-section">
                        <h3>∽ Housing ∽</h3>

                        <div class="question">
                            <label class="question-text" for="homeType">1. What type of home do you live in?</label>
                            <div>
                                <input type="radio" id="apartment" name="homeType" value="Apartment" checked>
                                <label class="option-label" for="apartment">Apartment</label>
                            </div>
                            <div>
                                <input type="radio" id="house" name="homeType" value="House">
                                <label class="option-label" for="house">House</label>
                            </div>
                            <div>
                                <input type="radio" id="condo" name="homeType" value="Condo">
                                <label class="option-label" for="condo">Condo</label>
                            </div>
                            <div>
                                <input type="radio" id="townhouse" name="homeType" value="Townhouse">
                                <label class="option-label" for="townhouse">Townhouse</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="homeSize">2. What is the size of your home?</label>
                            <div>
                                <input type="radio" id="small" name="homeSize" value="Small" checked>
                                <label class="option-label" for="small">Less than 60m²</label>
                            </div>
                            <div>
                                <input type="radio" id="medium" name="homeSize" value="Medium">
                                <label class="option-label" for="medium">Between 60m² and 120m²</label>
                            </div>
                            <div>
                                <input type="radio" id="large" name="homeSize" value="Large">
                                <label class="option-label" for="large">More than 120m²</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text">3. Is your home well-insulated?</label>
                            <div>
                                <input type="radio" id="insulationTrue" name="insulation" value="True" checked>
                                <label class="option-label" for="insulationTrue">Yes</label>
                            </div>
                            <div>
                                <input type="radio" id="insulationFalse" name="insulation" value="False">
                                <label class="option-label" for="insulationFalse">No</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="energySaving">4. Do you use energy-saving appliances?</label>
                            <div>
                                <input type="radio" id="energySavingYes" name="energySaving" value="Yes" checked>
                                <label class="option-label" for="energySavingYes">Yes</label>
                            </div>
                            <div>
                                <input type="radio" id="energySavingNo" name="energySaving" value="No">
                                <label class="option-label" for="energySavingNo">No</label>
                            </div>
                            <div>
                                <input type="radio" id="energySavingSome" name="energySaving" value="Some">
                                <label class="option-label" for="energySavingSome">Some</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="adults">5. How many adults are in your household?</label>
                            <div>
                                <input type="radio" id="one" name="adults" value="One" checked>
                                <label class="option-label" for="one">1 adult</label>
                            </div>
                            <div>
                                <input type="radio" id="two" name="adults" value="Two">
                                <label class="option-label" for="two">2 adults</label>
                            </div>
                            <div>
                                <input type="radio" id="threeMore" name="adults" value="Three or more">
                                <label class="option-label" for="threeMore">3 or more adults</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="children">6. How many children (under 18) are in your household?</label>
                            <div>
                                <input type="radio" id="noChildren" name="children" value="No children" checked>
                                <label class="option-label" for="noChildren">No children</label>
                            </div>
                            <div>
                                <input type="radio" id="oneChild" name="children" value="One child">
                                <label class="option-label" for="oneChild">1 child</label>
                            </div>
                            <div>
                                <input type="radio" id="twoChildren" name="children" value="Two children">
                                <label class="option-label" for="twoChildren">2 children</label>
                            </div>
                            <div>
                                <input type="radio" id="threeMoreChildren" name="children" value="Three or more children">
                                <label class="option-label" for="threeMoreChildren">3 or more children</label>
                            </div>
                        </div>
                        
                    </div>

                    <!-- Energy Section -->
                    <div class="energy-section">
                        <h3>∽ Energy Use ∽</h3>

                        <div class="question">
                            <label class="question-text" for="energyUsage">7. How much electricity do you use per month (in kWh)?</label>
                            <input type="range" id="energyUsage" name="energyUsage" min="500" max="2500" step="250" value="1000" oninput="updateSliderValue(this.value)">
                            <p>Electricity usage: <span id="sliderValue">1,000 kWh</span></p>
                        </div>

                        <div class="question">
                            <label class="question-text" for="renewableEnergy">8. Do you use renewable energy?</label>
                            <div>
                                <input type="radio" id="renewableYes" name="renewableEnergy" value="100% renewable" checked>
                                <label class="option-label" for="renewableYes">Yes, 100% renewable</label>
                            </div>
                            <div>
                                <input type="radio" id="partiallyRenewable" name="renewableEnergy" value="Partially renewable">
                                <label class="option-label" for="partiallyRenewable">Partially renewable</label>
                            </div>
                            <div>
                                <input type="radio" id="noRenewable" name="renewableEnergy" value="No">
                                <label class="option-label" for="noRenewable">No</label>
                            </div>
                            <div>
                                <input type="radio" id="unknownRenewable" name="renewableEnergy" value="I don’t know">
                                <label class="option-label" for="unknownRenewable">I don’t know</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="reduceElectricity">9. Did you make any efforts to reduce electricity usage during the past month?</label>
                            <div>
                                <input type="radio" id="reduceYes" name="reduceElectricity" value="Yes" checked>
                                <label class="option-label" for="reduceYes">Yes</label>
                            </div>
                            <div>
                                <input type="radio" id="reduceNo" name="reduceElectricity" value="No">
                                <label class="option-label" for="reduceNo">No</label>
                            </div>
                        </div>
                    </div>
                        
                    <!-- Transportation Section -->
                    <div class="transportation-section">
                        <h3>∽ Transportation ∽</h3>

                        <div class="question">
                            <label class="question-text" for="vehicleType">10. Do you own a car? If so, what type?</label>
                            <div>
                                <input type="radio" id="vehicleNone" name="vehicleType" value="None" checked>
                                <label class="option-label" for="vehicleNone">None</label>
                            </div>
                            <div>
                                <input type="radio" id="vehicleGasoline" name="vehicleType" value="Gasoline">
                                <label class="option-label" for="vehicleGasoline">Gasoline</label>
                            </div>
                            <div>
                                <input type="radio" id="vehicleDiesel" name="vehicleType" value="Diesel">
                                <label class="option-label" for="vehicleDiesel">Diesel</label>
                            </div>
                            <div>
                                <input type="radio" id="vehicleElectric" name="vehicleType" value="Electric">
                                <label class="option-label" for="vehicleElectric">Electric</label>
                            </div>
                            <div>
                                <input type="radio" id="vehicleHybrid" name="vehicleType" value="Hybrid">
                                <label class="option-label" for="vehicleHybrid">Hybrid</label>
                            </div>
                            <div>
                                <input type="radio" id="vehicleCNG" name="vehicleType" value="CNG">
                                <label class="option-label" for="vehicleCNG">CNG</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="kilometersDriven">11. How many kilometers did you drive during the past month?</label>
                            <input type="range" id="kilometersDriven" name="kilometersDriven" min="0" max="1000" step="100" value="0" oninput="updateKilometersValue(this.value)">
                            <p>Kilometers driven: <span id="kilometersValue">0 km</span></p>
                        </div>

                        <div class="question">
                            <label class="question-text" for="publicTransport">12. How often did you use public transportation during the past month?</label>
                            <div>
                                <input type="radio" id="transportDaily" name="publicTransport" value="Daily" checked>
                                <label class="option-label" for="transportDaily">Daily</label>
                            </div>
                            <div>
                                <input type="radio" id="transportSeveral" name="publicTransport" value="Several times a week">
                                <label class="option-label" for="transportSeveral">Several times a week</label>
                            </div>
                            <div>
                                <input type="radio" id="transportWeekly" name="publicTransport" value="Once a week">
                                <label class="option-label" for="transportWeekly">Once a week</label>
                            </div>
                            <div>
                                <input type="radio" id="transportRarely" name="publicTransport" value="Rarely">
                                <label class="option-label" for="transportRarely">Rarely</label>
                            </div>
                            <div>
                                <input type="radio" id="transportNever" name="publicTransport" value="Never">
                                <label class="option-label" for="transportNever">Never</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="flightsTaken">13. How many flights did you take during the past month?</label>
                            <div>
                                <input type="radio" id="flights0" name="flightsTaken" value="0 flights" checked>
                                <label class="option-label" for="flights0">0 flights</label>
                            </div>
                            <div>
                                <input type="radio" id="flights1" name="flightsTaken" value="1 flight">
                                <label class="option-label" for="flights1">1 flight</label>
                            </div>
                            <div>
                                <input type="radio" id="flights2" name="flightsTaken" value="2 flights">
                                <label class="option-label" for="flights2">2 flights</label>
                            </div>
                            <div>
                                <input type="radio" id="flights3Plus" name="flightsTaken" value="3+ flights">
                                <label class="option-label" for="flights3Plus">3+ flights</label>
                            </div>
                        </div>
                    </div>

                    <!-- Diet Section -->
                    <div class="diet-section">
                        <h3>∽ Diet ∽</h3>

                        <div class="question">
                            <label class="question-text" for="meatDairyConsumption">14. How often did you consume meat or dairy over the past month?</label>
                            <div>
                                <input type="radio" id="meatDaily" name="meatDairyConsumption" value="Daily">
                                <label class="option-label" for="meatDaily">Daily</label>
                            </div>
                            <div>
                                <input type="radio" id="meatFewTimes" name="meatDairyConsumption" value="A few times a week">
                                <label class="option-label" for="meatFewTimes">A few times a week</label>
                            </div>
                            <div>
                                <input type="radio" id="meatOnceWeek" name="meatDairyConsumption" value="Once a week">
                                <label class="option-label" for="meatOnceWeek">Once a week</label>
                            </div>
                            <div>
                                <input type="radio" id="meatRarely" name="meatDairyConsumption" value="Rarely">
                                <label class="option-label" for="meatRarely">Rarely</label>
                            </div>
                            <div>
                                <input type="radio" id="meatNever" name="meatDairyConsumption" value="Never" checked>
                                <label class="option-label" for="meatNever">Never</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="locallySourcedFood">15. Did you purchase locally sourced food during the past month?</label>
                            <div>
                                <input type="radio" id="localOften" name="locallySourcedFood" value="Yes, often" checked>
                                <label class="option-label" for="localOften">Yes, often</label>
                            </div>
                            <div>
                                <input type="radio" id="localOccasionally" name="locallySourcedFood" value="Yes, occasionally">
                                <label class="option-label" for="localOccasionally">Yes, occasionally</label>
                            </div>
                            <div>
                                <input type="radio" id="localNo" name="locallySourcedFood" value="No">
                                <label class="option-label" for="localNo">No</label>
                            </div>
                            <div>
                                <input type="radio" id="localUnknown" name="locallySourcedFood" value="I don’t know">
                                <label class="option-label" for="localUnknown">I don’t know</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="recycling">16. How much waste did you recycle during the past month?</label>
                            <div>
                                <input type="radio" id="recycle100" name="recycling" value="100%" checked>
                                <label class="option-label" for="recycle100">100%</label>
                            </div>
                            <div>
                                <input type="radio" id="recycleMost" name="recycling" value="Most of it">
                                <label class="option-label" for="recycleMost">Most of it</label>
                            </div>
                            <div>
                                <input type="radio" id="recycleSome" name="recycling" value="Some of it">
                                <label class="option-label" for="recycleSome">Some of it</label>
                            </div>
                            <div>
                                <input type="radio" id="recycleNone" name="recycling" value="None">
                                <label class="option-label" for="recycleNone">None</label>
                            </div>
                        </div>
                    </div>    
                    
                    <!-- Shopping -->
                    <div class="shopping">
                        <h3>∽ Shopping ∽</h3>

                        <div class="question">
                            <label class="question-text" for="consumerGoods">17. How many new consumer goods (clothing, electronics, furniture, etc.) did you purchase in the past month?</label>
                            <div>
                                <input type="radio" id="goodsNone" name="consumerGoods" value="None" checked>
                                <label class="option-label" for="goodsNone">None</label>
                            </div>
                            <div>
                                <input type="radio" id="goods1to2" name="consumerGoods" value="1-2 items">
                                <label class="option-label" for="goods1to2">1-2 items</label>
                            </div>
                            <div>
                                <input type="radio" id="goods3to5" name="consumerGoods" value="3-5 items">
                                <label class="option-label" for="goods3to5">3-5 items</label>
                            </div>
                            <div>
                                <input type="radio" id="goodsMore5" name="consumerGoods" value="More than 5 items">
                                <label class="option-label" for="goodsMore5">More than 5 items</label>
                            </div>
                        </div>   

                        <div class="question">
                            <label class="question-text" for="environmentalImpact">18. Did you make any efforts to reduce your environmental impact when purchasing consumer goods (e.g., buying second-hand, sustainable brands) in the past month?</label>
                            <div>
                                <input type="radio" id="impactYes" name="environmentalImpact" value="Yes, I prioritized second-hand or sustainable brands" checked>
                                <label class="option-label" for="impactYes">Yes, I prioritized second-hand or sustainable brands</label>
                            </div>
                            <div>
                                <input type="radio" id="impactOccasionally" name="environmentalImpact" value="Occasionally, but not always">
                                <label class="option-label" for="impactOccasionally">Occasionally, but not always</label>
                            </div>
                            <div>
                                <input type="radio" id="impactNo" name="environmentalImpact" value="No, I didn’t consider it">
                                <label class="option-label" for="impactNo">No, I didn’t consider it</label>
                            </div>
                            <div>
                                <input type="radio" id="impactNone" name="environmentalImpact" value="I didn’t purchase any consumer goods">
                                <label class="option-label" for="impactNone">I didn’t purchase any consumer goods</label>
                            </div>
                        </div>

                        <div class="question">
                            <label class="question-text" for="repairItems">19. How often do you try to repair items you already own?</label>
                            <div>
                                <input type="radio" id="repairAlways" name="repairItems" value="I always try to repair my things" checked>
                                <label class="option-label" for="repairAlways">I always try to repair my things</label>
                            </div>
                            <div>
                                <input type="radio" id="repairSometimes" name="repairItems" value="I do some things myself and sometimes send them for professional repair">
                                <label class="option-label" for="repairSometimes">I do some things myself and sometimes send them for professional repair</label>
                            </div>
                            <div>
                                <input type="radio" id="repairRarely" name="repairItems" value="I rarely repair items; I usually replace them">
                                <label class="option-label" for="repairRarely">I rarely repair items; I usually replace them</label>
                            </div>
                            <div>
                                <input type="radio" id="repairNever" name="repairItems" value="I don’t repair things at all">
                                <label class="option-label" for="repairNever">I don’t repair things at all</label>
                            </div>
                        </div>
                        
                        <div class="question">
                            <label class="question-text" for="repurposeItems">20. How often do you look to repurpose items for new uses?</label>
                            <div>
                                <input type="radio" id="repurposeAlways" name="repurposeItems" value="I always look for ways to repurpose items" checked>
                                <label class="option-label" for="repurposeAlways">I always look for ways to repurpose items</label>
                            </div>
                            <div>
                                <input type="radio" id="repurposeSometimes" name="repurposeItems" value="Sometimes, if it’s easy and useful">
                                <label class="option-label" for="repurposeSometimes">Sometimes, if it’s easy and useful</label>
                            </div>
                            <div>
                                <input type="radio" id="repurposeRarely" name="repurposeItems" value="I rarely repurpose items">
                                <label class="option-label" for="repurposeRarely">I rarely repurpose items</label>
                            </div>
                            <div>
                                <input type="radio" id="repurposeNever" name="repurposeItems" value="I don’t repurpose items at all">
                                <label class="option-label" for="repurposeNever">I don’t repurpose items at all</label>
                            </div>
                        </div>

                    </div>
                    
                    <!-- Submit Button Section (Fixed at the bottom) -->
                    <div class="submit-section-sticky">
                        <button id="submitBtn">Submit my answers</button>
                    </div>
                </div>   

                <!-- Chatbot Section -->
                <div class="chatbot-section">
                    <h3>Chat with PB!</h3>
                    <div class="chatbox" id="chatbox">
                        <!-- This is where chat messages will appear -->
                    </div>
                    <div class="input-area">
                        <input type="text" id="userInput" placeholder="Type your message...">
                        <button id="sendBtn">
                            <i class="fas fa-paper-plane"></i> <!-- FontAwesome icon -->
                        </button>
                    </div>
                </div> 
            </div>
            <!-- Footer Section -->
            <div class="footer-container">
                <p class="footer-text">
                    Privacy Policy: Your privacy is important to us. We do not collect any personal information that can identify you directly. Any data collected through the questionnaire is anonymous and used solely for improving the quality of the Planet Bouncer app. We do not share, sell, or distribute any user data to third parties. By using this site, you agree to our data usage policy to help promote a more sustainable future.
                </p>
            </div>  
        </div>    


        <script>
            function updateSliderValue(value) {
                document.getElementById('sliderValue').innerHTML = value + ' kWh';
            }
        </script>

        <script>
            function updateKilometersValue(value) {
                document.getElementById('kilometersValue').innerHTML = value + ' km';
            }
        </script>
    
        <script>
            // Display welcome messages on page load
            document.addEventListener('DOMContentLoaded', () => {
                const chatbox = document.getElementById('chatbox');
               
                // Messages to display in sequence
                const messages = [
                    "Welcome to Planet Bouncer!",
                    "1. Complete the questionnaire. Most questions focus on your habits last month, with a few covering general information.",
                    "2. I’ll calculate if you've overstayed your welcome on Earth. If you’ve burned through your share of resources, I’ll give you the exact date this month when it's time to pack your bags and find a new planet.",
                    "If you need help — like understanding average electricity usage or the meaning of 'CNG' — feel free to ask.",
                    "Let's find out if you’re allowed to stay on planet Earth a bit longer!"
                ];
            
                // Function to display messages with typing effect
                function displayMessages(messages) {
                    let index = 0;
            
                    function showNextMessage() {
                        if (index < messages.length) {
                            const message = messages[index];
                            let charIndex = 0;
                            const messageDiv = document.createElement('div');
                            messageDiv.classList.add('message', 'bot');
                            messageDiv.innerHTML = '<strong>PB:</strong> ';
                            chatbox.appendChild(messageDiv);
            
                            function typeChar() {
                                if (charIndex < message.length) {
                                    messageDiv.innerHTML += message.charAt(charIndex);
                                    charIndex++;
                                    chatbox.scrollTop = chatbox.scrollHeight; // Auto-scroll to the bottom
                                    setTimeout(typeChar, 10); // Adjust typing speed here
                                } else {
                                    index++;
                                    setTimeout(showNextMessage, 500); // Delay before next message
                                }
                            }
            
                            typeChar();
                        }
                    }
            
                    showNextMessage();
                }
            
                // Start the message display sequence
                displayMessages(messages);
            });
            
            // Event listener for Send button
            document.getElementById('sendBtn').addEventListener('click', function() {
                handleUserInput();
            });
        
            // Event listener for Enter key
            document.getElementById('userInput').addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    handleUserInput();
                }
            });
        
            // Function to handle user input
            async function handleUserInput() {
                const userInput = document.getElementById('userInput').value;
        
                if (!userInput.trim()) return;
        
                const chatbox = document.getElementById('chatbox');
                chatbox.innerHTML += `<div class="message user"><strong>You:</strong> ${userInput}</div>`;
                document.getElementById('userInput').value = '';  // Clear input field
        
                // Send message to OpenAI Assistant or your chatbot logic
                // For now, we'll simulate a response
                const response = "Thank you for your message!";  // Replace with your chatbot response
        
                // Display the Assistant's response with typing effect
                let charIndex = 0;
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message', 'bot');
                messageDiv.innerHTML = '<strong>PB:</strong> ';
                chatbox.appendChild(messageDiv);
        
                function typeChar() {
                    if (charIndex < response.length) {
                        messageDiv.innerHTML += response.charAt(charIndex);
                        charIndex++;
                        chatbox.scrollTop = chatbox.scrollHeight;
                        setTimeout(typeChar, 10); // Adjust typing speed here
                    }
                }
        
                typeChar();
            }
        </script>

        <script>
            // Capture all answers and submit
            document.getElementById('submitBtn').addEventListener('click', function() {
                const userData = {
                    homeType: document.querySelector('input[name="homeType"]:checked').value,
                    homeSize: document.querySelector('input[name="homeSize"]:checked').value,
                    insulation: document.querySelector('input[name="insulation"]:checked').value,
                    energySaving: document.querySelector('input[name="energySaving"]:checked').value,
                    adults: document.querySelector('input[name="adults"]:checked').value,
                    children: document.querySelector('input[name="children"]:checked').value,
                    energyUsage: document.getElementById('energyUsage').value,
                    renewableEnergy: document.querySelector('input[name="renewableEnergy"]:checked').value,
                    reduceElectricity: document.querySelector('input[name="reduceElectricity"]:checked').value,
                    vehicleType: document.querySelector('input[name="vehicleType"]:checked').value,
                    kilometersDriven: document.getElementById('kilometersDriven').value,
                    publicTransport: document.querySelector('input[name="publicTransport"]:checked').value,
                    flightsTaken: document.querySelector('input[name="flightsTaken"]:checked').value,
                    meatDairyConsumption: document.querySelector('input[name="meatDairyConsumption"]:checked').value,
                    locallySourcedFood: document.querySelector('input[name="locallySourcedFood"]:checked').value,
                    recycling: document.querySelector('input[name="recycling"]:checked').value,
                    consumerGoods: document.querySelector('input[name="consumerGoods"]:checked').value,
                    environmentalImpact: document.querySelector('input[name="environmentalImpact"]:checked').value,
                    repairItems: document.querySelector('input[name="repairItems"]:checked').value,
                    repurposeItems: document.querySelector('input[name="repurposeItems"]:checked').value
                };
        
                // Call the calculation function
                const overuseDay = calculateResourceOveruse(userData);
        
                const chatbox = document.getElementById('chatbox');
                chatbox.innerHTML += `<div class="message user"><strong>You:</strong> I have completed the form.</div>`;
        
                // Function to display text with typing effect
                function typeBotMessage(message, chatbox) {
                    let charIndex = 0;
                    const messageDiv = document.createElement('div');
                    messageDiv.classList.add('message', 'bot');
                    messageDiv.innerHTML = '<strong>PB:</strong> ';
                    chatbox.appendChild(messageDiv);
        
                    function typeChar() {
                        if (charIndex < message.length) {
                            messageDiv.innerHTML += message.charAt(charIndex);
                            charIndex++;
                            chatbox.scrollTop = chatbox.scrollHeight;  // Auto-scroll to the bottom
                            setTimeout(typeChar, 10); // Adjust typing speed here if desired
                        }
                    }
        
                    typeChar();
                }
        
                // Function to display bot messages with a typing effect and delay
                function typeBotMessageWithDelay(message, chatbox, delay = 0) {
                    setTimeout(() => {
                        typeBotMessage(message, chatbox);
                    }, delay);
                }
        
                // Display the result in the chatbot with an initial "Calculating..." message
                const calculatingMessage = "Calculating...";
                typeBotMessage(calculatingMessage, chatbox);
        
                // Set delay between "Calculating..." and the result message
                const delayBetweenMessages = 3000; // Adjust this time (in milliseconds) as needed
        
                // Result messages with delay
                if (overuseDay === 30) {
                    const congratsMessage = "Congratulations, your last month's consumption of Earth's resources is within your share. You're allowed to stay!";
                    typeBotMessageWithDelay(congratsMessage, chatbox, delayBetweenMessages);
                } else {
                    const warningMessage = `Based on your answers, you will exceed your share of Earth's resources by day ${overuseDay} in this month. If you haven't already, you should prepare to be evicted from the planet!`;
                    typeBotMessageWithDelay(warningMessage, chatbox, delayBetweenMessages);
                }
        
                // Auto-scroll to the latest message
                chatbox.scrollTop = chatbox.scrollHeight;

                // Google Analytics event tracking for Submit button
                gtag('event', 'submit_click', {
                    event_category: 'Questionnaire',
                    event_label: 'Submit Button',
                    value: 1
                });
            });
        </script>

        <script>
            // Handle user input and display bot response with typing effect
            async function handleUserInput() {
                const userInput = document.getElementById('userInput').value;
            
                if (!userInput.trim()) return;
            
                // Display user input in the chatbox
                const chatbox = document.getElementById('chatbox');
                chatbox.innerHTML += `<div class="message user"><strong>You:</strong> ${userInput}</div>`;
                document.getElementById('userInput').value = '';  // Clear input field
            
                // Get Assistant's response
                const response = await sendMessage(userInput);
            
                // Display the bot's response with typing effect
                let charIndex = 0;
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message', 'bot');
                messageDiv.innerHTML = '<strong>PB:</strong> ';
                chatbox.appendChild(messageDiv);
            
                function typeBotChar() {
                    if (charIndex < response.length) {
                        messageDiv.innerHTML += response.charAt(charIndex);
                        charIndex++;
                        chatbox.scrollTop = chatbox.scrollHeight;  // Auto-scroll to the bottom
                        setTimeout(typeBotChar, 18); // Adjust typing speed here
                    }
                }
            
                typeBotChar();
            }
            
            // Function to send message to GPT assistant
            async function sendMessage(message) {
                try {
                    const response = await fetch('/.netlify/functions/openaiAssistant', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message })
                    });
                    const data = await response.json();
                    return data.reply;  // Display only the reply text
                } catch (error) {
                    console.error('Error sending message:', error);
                    return 'Sorry, there was an error sending your message. Please try again.';
                }
            }
            
            // Event listeners for send button and Enter key
            document.getElementById('sendBtn').addEventListener('click', function() {
                handleUserInput();
        
                // Google Analytics event tracking for Send button
                gtag('event', 'send_click', {
                    event_category: 'Chatbot',
                    event_label: 'Send Button',
                    value: 1
                });
            });
            
            document.getElementById('userInput').addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    handleUserInput();
        
                    // Google Analytics event tracking for Enter key send
                    gtag('event', 'send_click', {
                        event_category: 'Chatbot',
                        event_label: 'Send Button',
                        value: 1
                    });
                }
            });
        </script>
        
    </body>
</html>
